<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title>Sudoku Tutor</title>

  <!--
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    SUDOKU TUTOR  (v2 ‚Äî improved)
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    A teaching-first Sudoku app that explains WHY a number
    goes where it does, not just what the answer is.

    FILE STRUCTURE
    ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    index.html  ‚Üê this file ‚Äî HTML skeleton & page structure
    style.css   ‚Üê all visual styling, colours, animations
    engine.js   ‚Üê puzzle generation & solving logic (pure JS)
    hints.js    ‚Üê technique detection & explanations
    render.js   ‚Üê reads Game state, writes to the DOM
    game.js     ‚Üê state object, all user actions, keyboard

    LOAD ORDER: engine ‚Üí hints ‚Üí render ‚Üí game
    Each file depends only on those before it.

    KEY FEATURES
    ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    ‚Ä¢ 5 difficulty levels (Beginner ‚Üí Expert)
    ‚Ä¢ Tutor tab: real-time hints with step-by-step explanations
    ‚Ä¢ Lessons tab: structured learning path
    ‚Ä¢ Techniques tab: reference library (Naked Single ‚Üí X-Wing)
    ‚Ä¢ Pencil notes with auto-fill and auto-clear
    ‚Ä¢ Score + streak bonuses + animated feedback
    ‚Ä¢ Undo, pause, check mode, sound
    ‚Ä¢ Keyboard: 1-9 place, Backspace erase, N notes, P pause,
                Ctrl+Z undo, Arrow keys navigate
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
  -->

  <link rel="stylesheet" href="style.css">
</head>

<body>

  <!-- ‚îÄ‚îÄ Loading overlay ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
       Shown for ~200 ms while the first puzzle generates.
       Prevents the UI from looking frozen on load.
  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
  <div id="loadOverlay" class="show" aria-live="polite">
    <span>Generating puzzle‚Ä¶</span>
  </div>

  <!-- ‚îÄ‚îÄ App header ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
       Title + tagline.  Georgia serif to match the board.
  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
  <h1>Sudoku Tutor</h1>
  <div class="sub" title="Learn solving techniques while you play">Learn ¬∑ Solve ¬∑ Master</div>
  <div style="margin-top:6px;">
    <a href="https://fjcinsa.github.io/sudoku-mastery/" target="_blank"
       style="font-family:Georgia,serif;font-size:.68rem;letter-spacing:.15em;text-transform:uppercase;
              color:#6b5f4a;text-decoration:none;border-bottom:1px solid #3a3228;padding-bottom:1px;
              transition:color .2s;"
       onmouseover="this.style.color='#c8a96e'" onmouseout="this.style.color='#6b5f4a'">
      üìñ Learn the techniques ‚Üí
    </a>
  </div>

  <!-- ‚îÄ‚îÄ Difficulty selector ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
       Five buttons: Beginner / Easy / Medium / Hard / Expert.
       Clicking any button starts a fresh puzzle.
       Built by Render.difficulty() on every Render.all().
  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
  <div class="dbar" id="dB" role="group" aria-label="Difficulty selector"></div>

  <!-- ‚îÄ‚îÄ Stats bar ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
       ‚ùå mistakes  ‚ö° score  üî• streak  ‚è± time elapsed
       Updated every second; each span has a tooltip.
  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
  <div class="info" role="status" aria-label="Game stats">
    <span id="xM" title="Number of mistakes (each costs 15 points)">‚ùå 0</span>
    <span id="xS" title="Score (+10 per correct digit, +25 for 5+ streak)">‚ö° 0</span>
    <span id="xK" title="Current correct-placement streak"></span>
    <span id="xT" title="Time elapsed">00:00</span>
  </div>

  <!-- ‚îÄ‚îÄ Progress bar ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
       Gold fill advances left-to-right as cells are solved.
       Width is set via JS; glows briefly after each correct cell.
  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
  <div class="pbar" role="progressbar" aria-label="Puzzle completion"
       aria-valuemin="0" aria-valuemax="100">
    <div class="pf" id="pF" style="width:0%"
         title="Puzzle completion percentage"></div>
  </div>

  <!-- ‚îÄ‚îÄ 9√ó9 board ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
       81 cells built dynamically by Render.board().
       data-r / data-c attributes identify each cell's position.
       Clicking a cell calls selectCell(r, c).
  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
  <div class="board" id="brd" role="grid" aria-label="Sudoku board"></div>

  <!-- ‚îÄ‚îÄ Action buttons ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
       Built by Render.actions().  Buttons:
         ‚úè Notes   ‚Äî toggle pencil-note mode (blue border)
         ‚úï Erase   ‚Äî clear selected cell
         ‚Ü© Undo    ‚Äî reverse last action
         üìù Auto   ‚Äî fill all candidates as notes
         ‚úì Check   ‚Äî toggle instant error feedback
         üîä/üîá    ‚Äî toggle sound
         ‚è∏/‚ñ∂     ‚Äî pause / resume
       Each button has a tooltip (title attribute).
  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
  <div class="acts" id="act" role="toolbar" aria-label="Game actions"></div>

  <!-- ‚îÄ‚îÄ Number pad ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
       9 buttons (1-9), built by Render.numpad().
       Each shows the digit and a small "placed/9" counter.
       Button is greyed out when all 9 of that digit are placed.
  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
  <div class="np" id="nup" role="toolbar" aria-label="Number pad"></div>

  <!-- ‚îÄ‚îÄ Teaching panel ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
       Tabbed area below the number pad.

       üí° Tutor tab
          Context-sensitive messages appear here whenever you:
          ‚Ä¢ tap a cell (shows candidate count or hint)
          ‚Ä¢ make a correct or wrong placement
          ‚Ä¢ use Show Move (shows technique + explanation)
          Buttons: "Show Move" (highlight next move) and
                   "Place N"   (apply hint automatically)

       üìñ Lessons tab
          Structured learning path ‚Äî five expandable cards:
          The Rules ‚Üí Scanning ‚Üí Naked Singles ‚Üí
          Hidden Singles ‚Üí Notes Mastery

       üß© Techniques tab
          Reference accordion for five solving strategies:
          Naked Single ‚Üí Hidden Single ‚Üí Naked Pair ‚Üí
          Pointing Pair ‚Üí X-Wing
          Each entry has: description, how-to, example.
  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
  <div class="pn" role="complementary" aria-label="Teaching panel">
    <div class="tbs" id="tbs" role="tablist"></div>
    <div class="tbd" id="tbd" role="tabpanel"></div>
  </div>

  <!-- ‚îÄ‚îÄ Win modal ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
       Full-screen overlay, shown when all 81 cells are correct.
       Displays: time, score, mistakes.
       Buttons: "Play Again" (same difficulty) / "Next ‚Üí" (harder).
  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
  <div class="mo" id="wM" role="dialog" aria-modal="true" aria-label="Puzzle complete">
    <div class="mi2">
      <div style="font-size:2.2rem;margin-bottom:8px" aria-hidden="true">üèÜ</div>
      <h2>Puzzle Complete!</h2>
      <p id="wP"></p>
      <div class="mbs">
        <button class="bp" onclick="newGame(Game.difficulty)"
          title="Start a new puzzle at the same difficulty level">
          Play Again
        </button>
        <button class="bs" onclick="nextLevel()"
          title="Advance to the next difficulty level">
          Next ‚Üí
        </button>
      </div>
    </div>
  </div>

  <!-- ‚îÄ‚îÄ JavaScript modules ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
       Loaded in dependency order:
         engine.js  ‚Äî pure puzzle logic, no DOM
         hints.js   ‚Äî technique detection, needs Engine
         render.js  ‚Äî DOM drawing, needs Game + Engine
         game.js    ‚Äî state + controls, needs all three
                      calls newGame('easy') at the bottom
  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
  <script src="engine.js"></script>   <!-- no dependencies -->
  <script src="hints.js"></script>    <!-- needs Engine     -->
  <script src="render.js"></script>   <!-- needs Game state -->
  <script src="game.js"></script>     <!-- needs all three  -->

  <!-- ‚îÄ‚îÄ Strike Banner ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
       Watches the mistake counter. After 3 mistakes the
       banner slides up from the bottom, linking to the
       Sudoku Mastery course. Dismissible. Resets on new game.
  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
  <div id="strikeBanner" class="sb" role="alert" aria-live="polite">
    <div class="sb-inner">
      <button class="sb-close" onclick="dismissBanner()" aria-label="Dismiss">‚úï</button>
      <div class="sb-icon">üí°</div>
      <div class="sb-title">Everyone gets stuck.</div>
      <div class="sb-text">The course shows you exactly why ‚Äî and fixes it in six chapters.</div>
      <div class="sb-meta">Free ¬∑ No signup required</div>
      <a class="sb-btn" href="https://fjcinsa.github.io/sudoku-mastery/course.html"
         target="_blank" rel="noopener">Open the Course ‚Üí</a>
    </div>
  </div>

  <style>
  .sb {
    display:none; position:fixed; bottom:0; left:0; right:0; z-index:200;
    padding:14px 20px;
    background:#161410ee;
    border-top:2px solid #c8a96e;
    backdrop-filter:blur(10px);
    -webkit-backdrop-filter:blur(10px);
  }
  .sb.show { display:block; animation:sbUp .35s ease; }
  @keyframes sbUp { from{transform:translateY(100%)} to{transform:translateY(0)} }
  .sb-inner {
    max-width:480px; margin:0 auto; text-align:center; position:relative;
    padding:4px 32px 0;
  }
  .sb-close {
    position:absolute; right:-8px; top:-4px;
    background:none; border:none; cursor:pointer;
    color:#6b5f48; font-size:.9rem; padding:4px 8px; line-height:1;
    transition:color .15s;
  }
  .sb-close:hover { color:#e8dcc8; }
  .sb-icon { font-size:1.3rem; margin-bottom:3px; }
  .sb-title {
    font-family:'Georgia',serif; font-size:.97rem;
    color:#e2c070; margin-bottom:3px; font-weight:600;
  }
  .sb-text {
    font-size:.8rem; color:#b8a880; line-height:1.5; margin-bottom:3px;
  }
  .sb-meta {
    font-size:.65rem; color:#6b5f48; margin-bottom:10px;
    letter-spacing:.1em; text-transform:uppercase;
  }
  .sb-btn {
    display:inline-block; padding:8px 22px;
    background:#c8a96e; border-radius:3px;
    color:#090806; font-weight:600; text-decoration:none;
    font-size:.8rem; transition:background .2s;
  }
  .sb-btn:hover { background:#e2c070; }
  </style>

  <script>
  (function() {
    var shown = false;

    // Watch the mistake counter element for changes
    var target = document.getElementById('xM');
    if (!target) return;

    var observer = new MutationObserver(function() {
      if (shown) return;
      // xM text is like "‚ùå 3" ‚Äî extract the number
      var txt = target.textContent || '';
      var n = parseInt(txt.replace(/[^0-9]/g, ''), 10);
      if (!isNaN(n) && n >= 3) {
        shown = true;
        document.getElementById('strikeBanner').classList.add('show');
      }
    });

    observer.observe(target, { childList:true, subtree:true, characterData:true });

    // Reset banner when a new game starts (mistake counter resets to 0)
    var newGameObserver = new MutationObserver(function() {
      var txt = target.textContent || '';
      var n = parseInt(txt.replace(/[^0-9]/g, ''), 10);
      if (!isNaN(n) && n === 0 && shown) {
        shown = false;
        document.getElementById('strikeBanner').classList.remove('show');
      }
    });
    newGameObserver.observe(target, { childList:true, subtree:true, characterData:true });
  })();

  function dismissBanner() {
    document.getElementById('strikeBanner').classList.remove('show');
  }
  </script>

</body>
</html>