/*
  ════════════════════════════════════════════════
  SUDOKU TUTOR — style.css
  ════════════════════════════════════════════════
  All visual styling lives here.
  Change colours, sizes, fonts — nothing breaks.

  SECTIONS:
    1. Reset & Variables
    2. Page Layout
    3. Header
    4. Difficulty Buttons
    5. Stats Bar
    6. Progress Bar
    7. Board Grid
    8. Cell Styles & States
    9. Pencil Notes
   10. Animations
   11. Action Buttons
   12. Number Pad
   13. Teaching Panel
   14. Tutor Tab Content
   15. Lessons Tab Content
   16. Techniques Tab Content
   17. Win Modal
  ════════════════════════════════════════════════
*/


/* ─────────────────────────────────────────────
   1. RESET & VARIABLES
   ───────────────────────────────────────────── */

/* Remove default browser spacing */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

/* Theme colours — edit these to reskin the entire app */
:root {
  --bg:  #141210;     /* page background: near-black warm */
  --sf:  #1e1b17;     /* surface: cells, buttons, panels */
  --sf2: #2a2520;     /* surface hover/press state */
  --bd:  #2e2720;     /* thin borders between cells */
  --bt:  #5a4d3f;     /* thick borders around 3×3 boxes */
  --tx:  #e0d5c7;     /* main text: warm off-white */
  --mu:  #8a7b6a;     /* muted text: labels, secondary info */
  --dm:  #6a5d4f;     /* dim text: least important */
  --ac:  #d4a050;     /* accent: gold, highlights, selected */
  --ag:  #d4a05022;   /* accent glow: translucent gold bg */
  --gv:  #b8a998;     /* given numbers: stone grey */
  --ok:  #6aad6a;     /* correct/success: soft green */
  --og:  #6aad6a22;   /* correct glow: translucent green */
  --er:  #c45c4a;     /* error: warm red */
  --eg:  #c45c4a22;   /* error glow: translucent red */
}


/* ─────────────────────────────────────────────
   2. PAGE LAYOUT
   ───────────────────────────────────────────── */

body {
  background: var(--bg);
  color: var(--tx);
  font-family: 'Segoe UI', sans-serif;
  min-height: 100vh;            /* full viewport height */
  display: flex;
  flex-direction: column;       /* stack everything vertically */
  align-items: center;          /* centre horizontally */
  padding: 14px 12px;
  overflow-x: hidden;           /* prevent horizontal scroll */
}


/* ─────────────────────────────────────────────
   3. HEADER
   ───────────────────────────────────────────── */

/* App title */
h1 {
  font-family: Georgia, serif;
  font-size: 1.7rem;
  color: var(--ac);
  letter-spacing: 2px;
}

/* Tagline below title */
.sub {
  font-size: .62rem;
  color: var(--mu);
  letter-spacing: 4px;
  text-transform: uppercase;
  margin-bottom: 12px;
}


/* ─────────────────────────────────────────────
   4. DIFFICULTY BUTTONS
   ───────────────────────────────────────────── */

/* Button row container */
.dbar {
  display: flex;
  gap: 5px;
  margin-bottom: 12px;
  flex-wrap: wrap;              /* wrap on narrow screens */
  justify-content: center;
}

/* Individual difficulty button */
.dbtn {
  padding: 5px 12px;
  font-size: .72rem;
  border: 1px solid var(--bd);
  background: var(--sf);
  color: var(--mu);
  border-radius: 6px;
  cursor: pointer;
  font-family: inherit;
  text-transform: capitalize;   /* "easy" → "Easy" */
}

/* Active difficulty: gold accent */
.dbtn.on {
  border-color: var(--ac);
  color: var(--ac);
  background: var(--ag);
}


/* ─────────────────────────────────────────────
   5. STATS BAR
   ───────────────────────────────────────────── */

/* Horizontal row: mistakes | score | streak | timer */
.info {
  display: flex;
  justify-content: space-between;
  width: 100%;
  max-width: 380px;
  font-size: .75rem;
  color: var(--mu);
  font-family: 'Courier New', monospace;  /* monospace for alignment */
  margin-bottom: 4px;
  padding: 0 2px;
}


/* ─────────────────────────────────────────────
   6. PROGRESS BAR
   ───────────────────────────────────────────── */

/* Track (background) */
.pbar {
  width: 100%;
  max-width: 380px;
  height: 3px;
  background: var(--sf2);
  border-radius: 2px;
  overflow: hidden;
  margin-bottom: 8px;
}

/* Fill (foreground) — animates width via JS */
.pf {
  height: 100%;
  background: linear-gradient(90deg, var(--ac), #e8c060);
  border-radius: 2px;
  transition: width .4s;        /* smooth fill animation */
}


/* ─────────────────────────────────────────────
   7. BOARD GRID
   ───────────────────────────────────────────── */

.board {
  display: grid;
  grid-template-columns: repeat(9, 1fr);  /* 9 equal columns */
  border: 2.5px solid var(--bt);           /* outer border */
  border-radius: 8px;
  overflow: hidden;                         /* clip corners */
  width: min(380px, calc(100vw - 28px));   /* responsive: max 380px */
  aspect-ratio: 1;                          /* always square */
  box-shadow:
    0 8px 32px #0006,                      /* drop shadow */
    0 0 60px #d4a05018;                    /* warm glow */
  transition: border-color .3s, box-shadow .3s;  /* smooth mode switch */
}

/* Note mode: board rim shifts to soft blue */
.board.note-mode {
  border-color: #5b8db8;
  box-shadow: 0 8px 32px #0006, 0 0 40px #5b8db822;
}


/* ─────────────────────────────────────────────
   8. CELL STYLES & STATES
   ───────────────────────────────────────────── */

/* Base cell */
.c {
  display: flex;
  align-items: center;
  justify-content: center;
  font-family: 'Courier New', monospace;
  font-size: clamp(.85rem, 3vw, 1.2rem);  /* responsive font */
  background: var(--sf);
  cursor: pointer;
  user-select: none;                        /* prevent text selection */
  transition: background .12s;              /* smooth state changes */
  border-right: 1px solid var(--bd);        /* thin grid lines */
  border-bottom: 1px solid var(--bd);
  position: relative;                       /* anchor for notes overlay */
  overflow: hidden;                         /* clip notes to cell */
}

/* Remove borders on edges */
.c:nth-child(9n)   { border-right: none; }   /* right column */
.c:nth-child(n+73) { border-bottom: none; }  /* bottom row */

/* Thick borders for 3×3 box boundaries */
.c[data-c="2"], .c[data-c="5"] { border-right: 2.5px solid var(--bt); }
.c[data-r="2"], .c[data-r="5"] { border-bottom: 2.5px solid var(--bt); }

/* Given number: printed by the puzzle, can't be changed */
.c.gv { color: var(--gv); font-weight: 700; }

/* Player input: number placed by the user */
.c.ip { color: var(--tx); }

/* Selected cell: gold border with breathing glow */
.c.sl {
  background: var(--ag);
  box-shadow: inset 0 0 0 2px var(--ac);
  z-index: 2;
  animation: breathe 2s ease-in-out infinite;
}

/* Note mode: selected cell shifts to blue */
.board.note-mode .c.sl {
  background: #5b8db822;
  box-shadow: inset 0 0 0 2px #5b8db8;
  animation: breatheNote 2s ease-in-out infinite;
}

/* Highlighted: same row, column, or box as selected */
.c.hl { background: #d4a05009; }

/* Same number: matches the selected cell's value */
/* Same number: matches the selected cell's value — strong highlight */
.c.sm { background: #d4a05035; box-shadow: inset 0 0 0 1px #d4a05066; }

/* Hint cell: green border with gentle pulse */
.c.hc {
  background: var(--og);
  box-shadow: inset 0 0 0 2px var(--ok);
  animation: hintPulse 1.5s ease-in-out infinite;
}

/* Conflict cell: red flash on wrong answer */
.c.cf { background: var(--eg); box-shadow: inset 0 0 0 2px var(--er); animation: shake .4s; }

/* Error text: wrong number shown in red */
.c.er { color: var(--er); }

/* Correct placement: green pop */
.c.ok {
  animation: popCorrect .5s ease-out;
  color: var(--ok);
}

/* Streak cell: gold burst */
.c.sk {
  animation: streakBurst .6s ease-out;
}

/* Completed unit flash (row/col/box done) */
.c.uf {
  animation: unitFlash .8s ease-out;
}

/* Tap feedback on mobile */
.c:active:not(.sl) { background: var(--sf2); transform: scale(0.95); }


/* ─────────────────────────────────────────────
   9. PENCIL NOTES
   ───────────────────────────────────────────── */

/* 3×3 grid overlay inside an empty cell */
.nt {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  grid-template-rows: repeat(3, 1fr);
  position: absolute;           /* overlay, doesn't affect cell size */
  inset: 0;                     /* fill entire cell */
  padding: 1px;
}

/* Individual note digit (1-9 in positions) */
.nt span {
  font-size: clamp(.32rem, 1vw, .48rem);  /* tiny, scales with cell */
  display: flex;
  align-items: center;
  justify-content: center;
  color: #c8b89a;              /* warm, readable on dark background */
  font-weight: 600;
}


/* ─────────────────────────────────────────────
   10. ANIMATIONS
   ───────────────────────────────────────────── */

/* Shake: horizontal rattle on wrong answer */
@keyframes shake {
  0%, 100% { transform: translateX(0) }
  20%      { transform: translateX(-3px) }
  40%      { transform: translateX(3px) }
  60%      { transform: translateX(-2px) }
  80%      { transform: translateX(1px) }
}

/* Breathe: gentle pulse on selected cell */
@keyframes breathe {
  0%, 100% { box-shadow: inset 0 0 0 2px var(--ac); }
  50%      { box-shadow: inset 0 0 0 2px var(--ac), 0 0 12px #d4a05044; }
}

/* Breathe in note mode: blue pulse */
@keyframes breatheNote {
  0%, 100% { box-shadow: inset 0 0 0 2px #5b8db8; }
  50%      { box-shadow: inset 0 0 0 2px #5b8db8, 0 0 12px #5b8db844; }
}

/* Hint pulse: green glow throb */
@keyframes hintPulse {
  0%, 100% { box-shadow: inset 0 0 0 2px var(--ok); }
  50%      { box-shadow: inset 0 0 0 2px var(--ok), 0 0 16px #6aad6a44; }
}

/* Pop correct: scale up then settle */
@keyframes popCorrect {
  0%   { transform: scale(0.6); opacity: 0.4; }
  50%  { transform: scale(1.2); opacity: 1; }
  100% { transform: scale(1); opacity: 1; }
}

/* Streak burst: gold flash + scale */
@keyframes streakBurst {
  0%   { background: #d4a05044; transform: scale(1); }
  30%  { background: #d4a05066; transform: scale(1.08); }
  100% { background: var(--sf); transform: scale(1); }
}

/* Unit flash: sweep for completed row/col/box */
@keyframes unitFlash {
  0%   { background: #d4a05033; }
  50%  { background: #6aad6a33; }
  100% { background: var(--sf); }
}

/* Board border flash on wrong answer */
@keyframes boardFlash {
  0%, 100% { box-shadow: 0 8px 32px #0006, 0 0 60px #d4a05018; }
  50%      { box-shadow: 0 8px 32px #0006, 0 0 30px #c45c4a44; }
}

.board.err-flash { animation: boardFlash .5s ease-out; }

/* Progress bar glow when advancing */
@keyframes progressGlow {
  0%   { filter: brightness(1); }
  50%  { filter: brightness(1.6); }
  100% { filter: brightness(1); }
}

.pf.glow { animation: progressGlow .6s ease-out; }

/* Number pad button press */
.nb { transition: transform .1s, background .15s; }
.nb:active { transform: scale(0.92); background: var(--sf2); }

/* Score pop-up floating text */
.score-pop {
  position: fixed;
  pointer-events: none;
  font-family: 'Courier New', monospace;
  font-size: .85rem;
  font-weight: 700;
  z-index: 50;
  animation: scoreFly 1s ease-out forwards;
}

@keyframes scoreFly {
  0%   { opacity: 1; transform: translateY(0) scale(1); }
  100% { opacity: 0; transform: translateY(-50px) scale(1.3); }
}

/* Win modal entrance */
.mo.sh .mi2 {
  animation: modalPop .4s ease-out;
}

@keyframes modalPop {
  0%   { transform: scale(0.7); opacity: 0; }
  70%  { transform: scale(1.05); opacity: 1; }
  100% { transform: scale(1); opacity: 1; }
}


/* ─────────────────────────────────────────────
   11. ACTION BUTTONS
   ───────────────────────────────────────────── */

/* Button row container */
.acts {
  display: flex;
  gap: 4px;
  flex-wrap: wrap;
  justify-content: center;
  width: 100%;
  max-width: 380px;
  margin-top: 8px;
}

/* Individual action button */
.ab {
  padding: 6px 10px;
  font-size: .68rem;
  border: 1px solid var(--bd);
  background: var(--sf);
  color: var(--mu);
  border-radius: 6px;
  cursor: pointer;
  font-family: inherit;
  white-space: nowrap;          /* prevent text wrapping */
}

/* Active state: gold accent (Notes ON, Check ON, Paused) */
.ab.on {
  border-color: var(--ac);
  color: var(--ac);
  background: var(--ag);
}


/* ─────────────────────────────────────────────
   12. NUMBER PAD
   ───────────────────────────────────────────── */

/* 9-column grid for number buttons */
.np {
  display: grid;
  grid-template-columns: repeat(9, 1fr);
  gap: 3px;
  width: 100%;
  max-width: 380px;
  margin-top: 8px;
}

/* Individual number button */
.nb {
  padding: 8px 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  font-family: 'Courier New', monospace;
  font-size: clamp(.8rem, 2.5vw, 1rem);
  font-weight: 600;
  background: var(--sf);
  border: 1px solid var(--bd);
  border-radius: 6px;
  color: var(--tx);
  cursor: pointer;
  min-width: 0;                /* allow shrinking on narrow screens */
}

/* Disabled: all 9 of this number are placed */
.nb.dn {
  opacity: .25;
  pointer-events: none;
}

/* Count label below number (e.g. "7/9") */
.nb small {
  font-size: .4rem;
  color: var(--dm);
  margin-top: 1px;
  font-weight: 400;
}


/* ─────────────────────────────────────────────
   13. TEACHING PANEL
   ───────────────────────────────────────────── */

/* Panel container */
.pn {
  width: 100%;
  max-width: 380px;
  background: #1a1714;
  border: 1px solid var(--bd);
  border-radius: 10px;
  overflow: hidden;
  margin-top: 12px;
}

/* Tab bar */
.tbs {
  display: flex;
  border-bottom: 1px solid var(--bd);
}

/* Individual tab */
.tb {
  flex: 1;
  padding: 9px 6px;
  font-size: .7rem;
  font-family: inherit;
  border: none;
  cursor: pointer;
  border-bottom: 2px solid transparent;
  background: transparent;
  color: var(--dm);
}

/* Active tab: gold underline */
.tb.on {
  border-bottom-color: var(--ac);
  background: var(--sf);
  color: var(--ac);
}

/* Tab body: scrollable content area */
.tbd {
  padding: 14px;
  max-height: 360px;
  overflow-y: auto;
}


/* ─────────────────────────────────────────────
   14. TUTOR TAB CONTENT
   ───────────────────────────────────────────── */

/* Message icon (emoji) */
.mi { font-size: 1.1rem; margin-bottom: 2px; }

/* Message title */
.mt {
  font-family: Georgia, serif;
  font-size: .95rem;
  color: var(--ac);
  margin: 0 0 6px;
}

/* Message body text */
.mb {
  font-size: .78rem;
  line-height: 1.6;
  color: var(--mu);
  white-space: pre-line;       /* preserve line breaks from hints */
}

/* Hint action buttons (Show Move / Place N) */
.hb {
  padding: 7px 14px;
  font-size: .72rem;
  border-radius: 6px;
  cursor: pointer;
  font-family: inherit;
  display: inline-block;
  margin-top: 4px;
  margin-right: 4px;
}

/* "Show Move" button: gold style */
.ha { border: 1px solid var(--ac); background: var(--ag); color: var(--ac); }

/* "Place N" button: green style */
.hg { border: 1px solid var(--ok); background: var(--og); color: var(--ok); }

/* Techniques Used tracker box */
.tu {
  margin-top: 14px;
  padding: 8px;
  background: var(--bg);
  border-radius: 6px;
  border: 1px solid var(--bd);
}

/* Tracker heading */
.tu h4 {
  font-size: .65rem;
  color: var(--dm);
  margin-bottom: 4px;
  text-transform: uppercase;
  letter-spacing: 1px;
  font-weight: 400;
}


/* ─────────────────────────────────────────────
   15. LESSONS TAB CONTENT
   ───────────────────────────────────────────── */

/* Lesson card */
.li {
  padding: 10px;
  margin-bottom: 6px;
  border: 1px solid var(--bd);
  border-radius: 8px;
  cursor: pointer;
}

/* Active lesson: highlighted border */
.li.on { background: var(--sf); border-color: var(--ac); }

/* Lesson title */
.li h4 { font-size: .78rem; font-weight: 600; color: var(--mu); }
.li.on h4 { color: var(--ac); }

/* Lesson tip banner */
.lt {
  font-size: .7rem;
  color: var(--ac);
  background: #d4a05012;
  padding: 5px 8px;
  border-radius: 4px;
  margin-top: 4px;
}

/* Pro upsell box */
.us {
  margin-top: 14px;
  padding: 12px;
  background: linear-gradient(135deg, #2a1f14, #1a1714);
  border: 1px solid var(--bt);
  border-radius: 8px;
  text-align: center;
}
.us h4 { font-size: .8rem; color: var(--ac); font-weight: 600; margin-bottom: 3px; }
.us p  { font-size: .7rem; color: var(--mu); margin: 3px 0 8px; line-height: 1.4; }
.us button {
  padding: 7px 18px;
  font-size: .72rem;
  border: 1px solid var(--ac);
  background: var(--ac);
  color: var(--bg);
  border-radius: 6px;
  cursor: pointer;
  font-weight: 600;
  font-family: inherit;
}


/* ─────────────────────────────────────────────
   16. TECHNIQUES TAB CONTENT
   ───────────────────────────────────────────── */

/* Accordion container */
details {
  margin-bottom: 6px;
  background: var(--sf);
  border: 1px solid var(--bd);
  border-radius: 8px;
  overflow: hidden;
}

/* Accordion header */
summary {
  padding: 8px 10px;
  font-size: .78rem;
  color: var(--tx);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 6px;
  list-style: none;
}
summary::-webkit-details-marker { display: none; }

/* Difficulty tag badge (Beginner / Intermediate / Advanced) */
.tg {
  font-size: .55rem;
  padding: 2px 6px;
  border-radius: 4px;
  text-transform: uppercase;
}

/* Accordion body */
.td {
  padding: 0 10px 10px;
  font-size: .75rem;
  line-height: 1.55;
  color: var(--mu);
}

/* Tip box inside accordion */
.tx {
  background: var(--bg);
  border-radius: 6px;
  padding: 6px 8px;
  margin: 4px 0;
}
.tx strong {
  font-size: .62rem;
  text-transform: uppercase;
  letter-spacing: 1px;
}


/* ─────────────────────────────────────────────
   17. WIN MODAL
   ───────────────────────────────────────────── */

/* Fullscreen overlay backdrop */
.mo {
  position: fixed;
  inset: 0;
  background: #000a;           /* semi-transparent black */
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 100;
}

/* Show modal (class toggled by JS) */
.mo.sh { display: flex; }

/* Modal card */
.mi2 {
  background: var(--sf);
  border: 1px solid var(--bt);
  border-radius: 16px;
  padding: 32px;
  text-align: center;
  max-width: 340px;
  margin: 16px;
}

/* Modal title */
.mo h2 {
  font-family: Georgia, serif;
  color: var(--ac);
  font-size: 1.4rem;
  margin: 0 0 6px;
}

/* Modal stats text */
.mo p {
  color: var(--mu);
  font-size: .82rem;
  line-height: 1.5;
  margin: 0 0 14px;
}

/* Modal button row */
.mbs {
  display: flex;
  gap: 8px;
  justify-content: center;
}
.mbs button {
  padding: 9px 20px;
  font-size: .8rem;
  border-radius: 8px;
  cursor: pointer;
  font-family: inherit;
}

/* Primary button: gold filled */
.bp { border: 1px solid var(--ac); background: var(--ac); color: var(--bg); font-weight: 600; }

/* Secondary button: outline */
.bs { border: 1px solid var(--bd); background: var(--sf); color: var(--mu); }
